# SceneBlueprint ç®€åŒ–ç‰ˆæµ‹è¯•æ¡†æ¶

## âœ… **å·²å®Œæˆçš„ç®€åŒ–å·¥ä½œ**

### **ç§»é™¤çš„åŠŸèƒ½**
- âŒ GitHub Actions CI/CD é…ç½®
- âŒ Git Hook è„šæœ¬ 
- âŒ å¤æ‚çš„è´¨é‡é—¨ç¦ç³»ç»Ÿ
- âŒ æµ‹è¯•è¿ç§»å·¥å…·
- âŒ è‡ªåŠ¨åŒ–éƒ¨ç½²ç›¸å…³åŠŸèƒ½

### **ä¿ç•™çš„æ ¸å¿ƒåŠŸèƒ½**
- âœ… Unity Test Runner é›†æˆ
- âœ… æµ‹è¯•å·¥å…·ç±» (TestDataBuilder, AssertionExtensions)
- âœ… ä»£ç è¦†ç›–ç‡åˆ†æ
- âœ… Unity Editor èœå•ç³»ç»Ÿ
- âœ… å®Œæ•´çš„æµ‹è¯•ç›®å½•ç»“æ„

## ğŸš€ **å½“å‰å¯ç”¨åŠŸèƒ½**

### **Unity Editor èœå•** (`SceneBlueprint â†’ Tests`)

| èœå•é¡¹ | åŠŸèƒ½è¯´æ˜ |
|--------|----------|
| ğŸš€ æ‰“å¼€ Unity Test Runner | å¯åŠ¨Unityæµ‹è¯•çª—å£ï¼Œè¿è¡ŒçœŸå®æµ‹è¯• |
| ğŸ“Š æµ‹è¯•ç»Ÿè®¡ä¿¡æ¯ | æ˜¾ç¤ºå‘ç°çš„æµ‹è¯•æ•°é‡å’Œæ¡†æ¶çŠ¶æ€ |
| ğŸ“‚ æŸ¥çœ‹æµ‹è¯•ç»“æ„ | åœ¨æ§åˆ¶å°æ˜¾ç¤ºæµ‹è¯•ç›®å½•ç»“æ„ |
| ğŸ¯ å¿«é€Ÿæµ‹è¯•æŒ‡å— | æ˜¾ç¤ºæµ‹è¯•ä½¿ç”¨çš„æœ€ä½³å®è·µ |
| ğŸ”§ æµ‹è¯•å·¥å…·ç®± | ä»‹ç»å¯ç”¨çš„æµ‹è¯•å·¥å…·ç±» |
| ğŸ“Š ä»£ç è¦†ç›–ç‡åˆ†æ | åŸºç¡€çš„ä»£ç è¦†ç›–ç‡ç»Ÿè®¡ |
| ğŸ“ æ‰“å¼€æµ‹è¯•ç›®å½• | ç›´æ¥æ‰“å¼€æµ‹è¯•æ–‡ä»¶å¤¹ |
| ğŸ“– æ‰“å¼€ä½¿ç”¨æŒ‡å— | æ‰“å¼€è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£ |

### **æµ‹è¯•å·¥å…·ç±»**

#### **TestDataBuilder** - å¿«é€Ÿåˆ›å»ºæµ‹è¯•æ•°æ®
```csharp
var bag = TestDataBuilder.CreateEmptyPropertyBag();
var registry = TestDataBuilder.CreateDiscoveredRegistry();
var nodeData = TestDataBuilder.CreateSpawnNodeData();
```

#### **AssertionExtensions** - å¢å¼ºçš„æ–­è¨€æ–¹æ³•
```csharp
bag.ShouldContainKey("key");
bag.ShouldContain("key", "value");
def.ShouldHavePort("in", PortDirection.In);
action.ShouldCompleteWithin(1000);
```

#### **CoverageAnalyzer** - ä»£ç è¦†ç›–ç‡åˆ†æ
```csharp
var report = CoverageAnalyzer.AnalyzeCoverage();
CoverageAnalyzer.PrintConsoleSummary(report);
```

### **æµ‹è¯•ç›®å½•ç»“æ„**
```
Tests/
â”œâ”€â”€ Unit/Core/              # å•å…ƒæµ‹è¯•ï¼ˆ8ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ ActionDefinitionTests.cs
â”‚   â”œâ”€â”€ PropertyBagTests.cs
â”‚   â”œâ”€â”€ ActionRegistryTests.cs
â”‚   â”œâ”€â”€ PropFactoryTests.cs
â”‚   â”œâ”€â”€ VisibleWhenTests.cs
â”‚   â””â”€â”€ PropertyBagTests_Example.cs  # æœ€ä½³å®è·µç¤ºä¾‹
â”œâ”€â”€ Integration/            # é›†æˆæµ‹è¯•ï¼ˆ2ä¸ªæ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ FlowActionTests.cs
â”‚   â””â”€â”€ CombatActionTests.cs  
â”œâ”€â”€ E2E/                   # ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆ1ä¸ªæ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ EndToEndTests.cs
â”œâ”€â”€ Unit/Utils/            # æµ‹è¯•å·¥å…·ç±»
â”‚   â”œâ”€â”€ TestDataBuilder.cs
â”‚   â””â”€â”€ AssertionExtensions.cs
â””â”€â”€ Scripts/               # æ¡†æ¶æ ¸å¿ƒ
    â”œâ”€â”€ TestRunner.cs
    â”œâ”€â”€ CoverageAnalyzer.cs
    â”œâ”€â”€ UnityTestRunnerIntegration.cs
    â””â”€â”€ Editor/TestMenuItems.cs
```

## ğŸ’¡ **æ¨èä½¿ç”¨æ–¹å¼**

### **1. æ—¥å¸¸å¼€å‘æµç¨‹**
```
1. ä½¿ç”¨èœå•ï¼šSceneBlueprint â†’ Tests â†’ ğŸš€ æ‰“å¼€ Unity Test Runner
2. åœ¨ Test Runner çª—å£è¿è¡Œæµ‹è¯•
3. æŸ¥çœ‹è¯¦ç»†çš„æµ‹è¯•ç»“æœå’Œæ—¥å¿—
4. ç¼–å†™æ–°æµ‹è¯•æ—¶å‚è€ƒ PropertyBagTests_Example.cs
```

### **2. ç¼–å†™æ–°æµ‹è¯•**
```csharp
[Test]
public void MyNewFeature_WhenCondition_ShouldBehavior()
{
    // Arrange - ä½¿ç”¨å·¥å…·ç±»
    var data = TestDataBuilder.CreatePropertyBag();
    
    // Act - æ‰§è¡Œæ“ä½œ
    data.Set("key", "value");
    
    // Assert - ä½¿ç”¨æ‰©å±•æ–­è¨€
    data.ShouldContain("key", "value");
}
```

### **3. æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡**
```
SceneBlueprint â†’ Tests â†’ ğŸ“Š ä»£ç è¦†ç›–ç‡åˆ†æ
```

### **4. è·å–å¸®åŠ©**
```
SceneBlueprint â†’ Tests â†’ ğŸ¯ å¿«é€Ÿæµ‹è¯•æŒ‡å—
SceneBlueprint â†’ Tests â†’ ğŸ“– æ‰“å¼€ä½¿ç”¨æŒ‡å—  
```

## ğŸ¯ **æ¡†æ¶ç‰¹ç‚¹**

### **âœ¨ ç®€æ´å®ç”¨**
- ä¸“æ³¨Unity Editoré›†æˆ
- æ¸…æ™°çš„èœå•ç»“æ„
- ä¸°å¯Œçš„æ§åˆ¶å°æ—¥å¿—è¾“å‡º
- æ— å¤æ‚çš„å¤–éƒ¨ä¾èµ–

### **ğŸ› ï¸ é«˜æ•ˆå¼€å‘**
- å¼ºå¤§çš„æµ‹è¯•å·¥å…·ç±»
- è¡¨è¾¾æ€§æ–­è¨€æ–¹æ³•
- å¿«é€Ÿæ•°æ®æ„å»ºå™¨
- ä¸€é”®è®¿é—®æ‰€æœ‰åŠŸèƒ½

### **ğŸ“š å®Œæ•´æ–‡æ¡£**
- è¯¦ç»†çš„ä½¿ç”¨æŒ‡å—
- æœ€ä½³å®è·µç¤ºä¾‹
- å¸¸è§é—®é¢˜è§£ç­”
- å®æ—¶å¸®åŠ©ç³»ç»Ÿ

## ğŸš€ **ç«‹å³å¼€å§‹**

1. **è¿è¡Œæµ‹è¯•**ï¼š`SceneBlueprint â†’ Tests â†’ ğŸš€ æ‰“å¼€ Unity Test Runner`
2. **æŸ¥çœ‹ç¤ºä¾‹**ï¼šæŸ¥çœ‹ `PropertyBagTests_Example.cs` æ–‡ä»¶
3. **ç¼–å†™æµ‹è¯•**ï¼šä½¿ç”¨ `TestDataBuilder` å’Œ `AssertionExtensions`
4. **è·å–å¸®åŠ©**ï¼šä½¿ç”¨èœå•ä¸­çš„æŒ‡å—å’Œæ–‡æ¡£åŠŸèƒ½

---

**ç®€åŒ–ç‰ˆæµ‹è¯•æ¡†æ¶ä¸“æ³¨äºUnity Editorä¸­çš„ä¾¿æ·æµ‹è¯•ä½“éªŒï¼Œæä¾›æ‰€æœ‰å¿…è¦çš„æµ‹è¯•å·¥å…·ï¼Œæ— å¤æ‚é…ç½®ï¼Œå¼€ç®±å³ç”¨ï¼** ğŸ‰
